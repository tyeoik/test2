# =========================================================
# 3. STREAMLIT APP LAYOUT (ìˆ˜ì • í•„ìˆ˜ ë¶€ë¶„)
# =========================================================
# ...

# ì†ŒìŒ ì ìˆ˜ ìë™ ë³€ê²½ ë°©ì§€: ë°ì´í„°ê°€ ì„¸ì…˜ ìƒíƒœì— ì—†ìœ¼ë©´ ë”± í•œ ë²ˆ ì´ˆê¸° ë°ì´í„° ë¡œë“œ
if 'df_students' not in st.session_state:
    st.session_state.df_students = get_class_roster()

st.subheader("ğŸ“ í•™ìƒ ëª…ë‹¨ ë° íŠ¹ì„± í¸ì§‘")
st.caption("ì†ŒìŒ ì ìˆ˜: 1ì (ì¡°ìš©í•¨) ~ 10ì (ì‹œë„ëŸ¬ì›€/ì£¼ì˜ í•„ìš”). ê°’ì„ ìˆ˜ì •í•˜ë©´ ìœ ì§€ë©ë‹ˆë‹¤.")

# st.data_editorë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° í¸ì§‘ ê°€ëŠ¥í•˜ê²Œ ì„¤ì •. 
# í¸ì§‘ê¸°ì˜ ì…ë ¥ê°’ì€ st.session_state.df_studentsë¥¼ ì‚¬ìš©
edited_df = st.data_editor(
    # ì£¼ì˜: ì´ˆê¸° ë¡œë“œ ì‹œì  ì™¸ì—ëŠ” st.session_stateì— ì €ì¥ëœ í¸ì§‘ê°’ì„ ì‚¬ìš©
    st.session_state.df_students, 
    column_config={
        # ... (ì»¬ëŸ¼ ì„¤ì •ì€ ì´ì „ê³¼ ë™ì¼) ...
        "ì´ë¦„": st.column_config.TextColumn("ì´ë¦„", help="í•™ìƒì˜ ì´ë¦„ì„ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.", required=True),
        "ì„±ë³„": st.column_config.TextColumn("ì„±ë³„", help="ì„±ë³„ì€ 'ë‚¨' ë˜ëŠ” 'ì—¬'ë¡œë§Œ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.", disabled=True),
        "ì†ŒìŒ_ì ìˆ˜": st.column_config.NumberColumn("ì†ŒìŒ_ì ìˆ˜", help="1~10 ì‚¬ì´ì˜ ì†ŒìŒ/íŠ¹ì„± ì ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”.", min_value=1, max_value=10, step=1, required=True)
    },
    hide_index=True,
    num_rows="dynamic",
    # keyë¥¼ ì„¤ì •í•˜ì—¬ Streamlitì´ ìœ„ì ¯ì„ êµ¬ë¶„í•˜ê³  ìƒíƒœë¥¼ ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€í•˜ë„ë¡ í•¨
    key='student_data_editor' 
)

# **!!! ê°€ì¥ ì¤‘ìš”í•œ ìˆ˜ì • !!!**
# í¸ì§‘ëœ DataFrame(edited_df)ì„ session_stateì— ì¦‰ì‹œ ë®ì–´ì”Œì›Œ 
# ì‚¬ìš©ìê°€ ìˆ˜ì •í•œ ê°’ì´ ë‹¤ìŒ ì‹¤í–‰ì—ì„œë„ ìœ ì§€ë˜ë„ë¡ ê°•ì œí•©ë‹ˆë‹¤.
# ì´ í•œ ì¤„ì´ ì‚¬ìš©ìì˜ ìµœì¢… ìˆ˜ì •ê°’ì„ ì˜êµ¬ì ìœ¼ë¡œ ìœ ì§€í•˜ëŠ” í•µì‹¬ì…ë‹ˆë‹¤.
st.session_state.df_students = edited_df

# --- ìë¦¬ ë°°ì¹˜ ì‹œì‘ ---
# ... (ì´í•˜ ë¡œì§ì€ ë³€ê²½ ì—†ìŒ) ...
